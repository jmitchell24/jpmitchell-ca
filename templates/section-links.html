{% extends "base.html" %}

{% block content %}

{% set links = get_section(path="links/_index.md") %}

<section> 
    <section-title> 
        {% include "ionicons/link-outline.html" %}
        My favorite articles and posts 
    </section-title>   

    <section-nav>
        <a href="/">
            {% include "ionicons/arrow-undo-outline.html" %}
             Home
        </a>
    </section-nav>

    

    <section-content>    
        <tinypost-list>
            {% for it in links.pages %}
            <tinypost-item data-external-href="{{ it.extra.url }}">
                <tinypost-item-title>
                    {{ it.title }}
                </tinypost-item-title>

                <tinypost-item-content>
                    {{ it.extra.summary }}
                </tinypost-item-content>

                <tinypost-item-status>
                    {% include "ionicons/time-outline.html" %}
                    {{ it.date | date(format="%a %b. %d, %Y") }}
                </tinypost-item-status>
            </tinypost-item>
            {% endfor %}
        </tinypost-list> 
    </section-content>
    
</section>

<script>
    document.querySelectorAll('*').forEach(item => {
        const url = item.getAttribute('data-external-href');
        if (url) { 
            item.setAttribute('title', url);
            item.addEventListener('click', (e) => {
                window.open(url, '_blank');
            });
            
            // Make it keyboard accessible
            item.setAttribute('tabindex', '0');
            item.setAttribute('role', 'link');
            item.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    item.click();
                }
            });
        }
    });
</script>

{% endblock content %}